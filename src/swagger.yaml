openapi: 3.0.3
info:
  title: NEO DOCUMENTATION
  version: 1.0.0
  description: >
    API BACKEND NEO

    ### LES WEBSOCKETS ###

    **Authentification :**  
    Envoyer le token JWT dans l’en-tête `Authorization Bearer`.

    **Les evenements**
    
    - `NotifyCreate`
      - data
        - state
          - flottant
          - avatar
          - push
        - image
          - lien vers l'image
        - avatar
          - lien vers l'avatar
        - name
          - nom du chemin demander
        - path
          - lien du chemin demander
        - target
          - zone cible
        - message
          - message associer
        - expired
          - date d'expiration du chemin
      - responses:
        '201':
          description: created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Notify'
    - `NotifyUpdate`
      - data
        - id
          - identifiant unique
        - ...
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Notify'
    - `NotifyDelete`
      - data
        - id
          - identifiant unique
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
    - `NotifyList`
      - data
        - page
        - limit
        - state
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: array
                    items:
                      $ref: '#/components/schemas/Notify'
    - `NotifyRead`
      - data
        - id
          - identifiant unique
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Notify'
    - `findOrCreateRoom`
      - data
        - id
          - identifiant unique
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Room'
    - `findAllRooms`
      - data
        - page
        - limit
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: array
                    items:
                      $ref: '#/components/schemas/Room'
    - `joinRoom`
      - data
        - room
          - identifiant unique
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object'
                    properties:
                      data:
                        $ref: '#/components/schemas/Room'
    - `leaveRoom`
      - data
        - room
          - identifiant unique
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object'
                    properties:
                      data:
                        $ref: '#/components/schemas/Room'
    - `myAllRooms`
      - responses:
        '200':
          description: OK
          content:
            application/json:
              allOf:
                - $ref: '#/components/schemas/JsonResponse'
                - type: array
                  items:
                    $ref: '#/components/schemas/Room'
    - `sendSms`
      - data
        - room
          - identifiant unique
        - content
          - contenu du message
        - state
          - etat du message
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                - $ref: '#/components/schemas/JsonResponse'
                - type: object
                  properties:
                    data:
                      $ref: '#/components/schemas/Sms'
    - `readSms`
      - data
        - id
          - identifiant unique
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Sms'
    - `listSms`
      - data
        - page
        - limit
        - room
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: array
                    items:
                      $ref: '#/components/schemas/Sms'
    - `deleteSms`
      - data
        - id
          - identifiant unique
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
    - `addReaction`
      - data
        - message
          - identifiant du message
        - emoji
          - emoji du message
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
    - `deleteReaction`
      - data
        - id
          - identifiant unique
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
    - `createStatus`
      - data
        - org
        - text
        - link
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Status'
    - `retrieveStatus`
      - data
        - id
          - identifiant unique
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Status'
    - `listStatus`
      - data
        - page
        - limit
        - org
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: array
                    items:
                      $ref: '#/components/schemas/Status'
    - `deleteStatus`
      - data
        - id
          - identifiant unique
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
    - `countStatus`
      - data
        - org
      - responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: number
    

servers:
  - url: http://localhost:8001/
    description: Serveur de développement local

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  
  parameters:
    _name:
      name: name
      in: query
      schema:
        type: string
    _manager:
      name: manager
      in: query
      schema:
        type: string
        format: ObjectId
    _referer:
      name: referer
      in: query
      schema:
        type: string
        format: ObjectId
    _lat:
      name: lat
      in: query
      schema:
        type: number
    _lon:
      name: lon
      in: query
      schema:
        type: number
    _radius:
      name: radius
      in: query
      schema:
        type: number
    _id:
      name: id
      in: path
      required: true
      schema:
        type: string
        format: ObjectId
    _cname:
      name: name
      in: path
      required: true
      schema:
        type: string
    _limit:
      name: limit
      in: query
      schema:
        type: number
    _page:
      name: page
      in: query
      schema:
        type: number
    _lang:
      name: lang
      in: query
      schema:
        type: string
    _currency:
      name: currency
      in: query
      schema:
        type: string
    _min:
      name: min
      in: query
      schema:
        type: number
    _max:
      name: max
      in: query
      schema:
        type: number
    _after:
      name: after
      in: query
      schema:
        type: string
        format: date-time
    _before:
      name: before
      in: query
      schema:
        type: string
        format: date-time
    _me:
      name: me
      in: query
      schema:
        type: string
    _online:
      name: online
      in: query
      schema:
        type: string
    _auth:
      name: auth
      in: query
      schema:
        type: string
    _sex:
      name: sex
      in: query
      schema:
        type: string
        enum:
          - F
          - M
    _version:
      name: version
      in: query
      schema:
        type: string
    _org:
      name: org
      in: query
      schema:
        type: string
        format: ObjectId

  schemas:
    Authenticated:
      type: object
      properties:
        accessToken:
          type: string
          description: token d'access uniquement a la route nones
        refreshToken:
          type: string
          description: token de rafraichissement du token d'access

    JsonResponse:
      type: object
      required:
        - success
        - message
      properties:
        success:
          type: boolean
        message:
          type: string
        error:
          type: string
        data:
          type: object
    
    Referer:
      type: object
      properties:
        fullname:
          type: string
        country:
          type: string
        city:
          type: string
        position:
          type: string
        phone:
          type: string
        email:
          type: string
        picture:
          type: string
          format: url
          description: lien vers l'avatar du referant
        password:
          type: string
        click:
          type: number
        online:
          type: boolean
          description: permet d'identifier un utilisateur en ligne
        isAuthenticated:
          type: boolean
          description: permet d'identifier un utilisateur authentifier
        authorization:
          type: array
          items:
            type: string
        disconnected:
          type: string
          description: dernier date de deconnexion
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur

    Neo:
      type: object
      required:
        - org
        - sex
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant
        org: 
          type: string
          format: ObjectId
          description: identifiant de l'organisation proprietaire
        fullname:
          type: string
        picture:
          type: string
          format: url
          description: lien vers l'avatar du lead
        online:
          type: boolean
          description: definis si neo est actif ou non
        responsability: 
          type: string
          description: role de l'agent ia
        sex:
          type: string
          enum:
            - F
            - M
        mission:
          type: string
          description: que devrais faire neo
        context:
          type: string
          description: en tant que ?
        task:
          type: string
          description: comment accomplir la mission
        version:
          type: string
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur

    Manager:
      type: object
      required:
        - firstname
        - lastname
        - email
        - phone
        - position
        - password
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant unique
        firstname:
          type: string
        lastname:
          type: string
        email:
          type: string
        phone:
          type: string
        picture:
          type: string
          format: url
          description: lien vers l'avatar du manager
        position:
          type: string
        password:
          type: string
        online:
          type: boolean
          description: permet d'identifier un utilisateur en ligne
        isAuthenticated:
          type: boolean
          description: permet d'identifier un utilisateur authentifier
        authorization:
          type: array
          items:
            type: string
        disconnected:
          type: string
          description: dernier date de deconnexion
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur
    
    Lead:
      type: object
      properties:
        firstname:
          type: string
        lastname:
          type: string
        picture:
          type: string
          format: url
          description: lien vers l'avatar du lead
        phone:
          type: string
        address:
          type: string
        online:
          type: boolean
          description: permet d'identifier un utilisateur en ligne
        isAuthenticated:
          type: boolean
          description: permet d'identifier un utilisateur authentifier
        authorization:
          type: array
          items:
            type: string
        disconnected:
          type: string
          description: dernier date de deconnexion
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur

    Employee:
      type: object
      required:
        - org
        - fullname
        - email
        - phone
        - password
      properties:
        org:
          type: string
          format: ObjectId
          description: identifiant de l'organisation proprietaire
        fullname:
          type: string
          description: nom complet de l'employer
        email:
          type: string
        phone:
          type: string
        picture:
          type: string
          format: url
          description: lien vers l'avatar de l'employer
        password:
          type: string
        online:
          type: boolean
          description: permet d'identifier un utilisateur en ligne
        isAuthenticated:
          type: boolean
          description: permet d'identifier un utilisateur authentifier
        isVerified:
          type: boolean
          description: permet d'identifier un utilisateur verifie
        authorization:
          type: array
          items:
            type: string
        disconnected:
          type: string
          description: dernier date de deconnexion
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur
    
    Admin:
      type: object
      required:
        - phone
        - email
        - cni
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant unique
        firstname:
          type: string
        lastname:
          type: string
        picture:
          type: string
          format: url
        phone:
          type: string
          description: numero telephonique personnel
        email:
          type: string
        cni:
          type: string
          description: Carte National d'Identité
        position:
          type: string
        recovery:
          type: string
        online:
          type: boolean
          description: permet d'identifier un utilisateur en ligne
        isAuthenticated:
          type: boolean
          description: permet d'identifier un utilisateur authentifier
        authorization:
          type: array
          items:
            type: string
        disconnected:
          type: string
          description: dernier date de deconnexion
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur
    
    Notify:
      type: object
      description: >
        toute type de notification
      required:
        - name
        - path
        - expired
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant unique
        state:
          type: string
          enum:
            - flottant
            - avatar
            - push
        image:
          type: string
          format: url
          description: lien vers l'image
        avatar:
          type: string
          format: url
          description: lien vers l'avatar
        name:
          type: string
          description: nom du chemin demander
        path:
          type: string
          format: url
          description: lien du chemin demander
        target:
          type: string
          description: zone cible
        message:
          type: string
          description: message associer
        expired:
          type: string
          format: date-time
          description: date d'expiration du chemin
        status:
          type: string
          enum:
            - pending
            - running
            - pass
          description: status
        view:
          type: object
          properties:
            size: 
              type: number
            interested:
              type: number
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur

    Device:
      type: object
      description: >
        historique des action sur la plateforme
      properties:
        hote:
          type: string
          format: ObjectId
          description: identifiant du hote
        path:
          type: string
          format: url
          description: lien du chemin demander
        type: 
          type: string
          description: nommer l'action
        method:
          type: string
          description: method lie au chemin demander
        ip:
          type: string
          description: addresse ip
        agent: 
          type: string
          description: user agent
        browser:
          type: string
          description: navigateur utiliser
        os: 
          type: string
          description: systeme d'exploitation utiliser
        location:
          type: object
          properties:
            country:
              type: string
            city:
              type: string
            region:
              type: string
            lat:
              type: number
            lon:
              type: number
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur

    Reaction:
      type: object
      description: >
        reaction a un message envoyer
      required:
        - message
        - hote
        - emoji
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant
        message:
          type: string
          format: ObjectId
          description: identifiant du message
        hote:
          type: string
          format: ObjectId
          description: identifiant du hote
        emoji:
          type: string
          description: emoji du message
    
    Sms:
      type: object
      description: >
        message dans la disccussion
      required:
        - room
        - hote
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant unique
        room:
          type: string
          format: ObjectId
          description: identifiant de la disccussion
        hote:
          type: string
          format: ObjectId
          description: identifiant du hote
        content:
          type: string
          description: contenu du message
        state:
          type: string
          enum:
            - text
            - external
          description: etat du message
        read:
          type: boolean
          description: message lu ou non
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur

    Guest:
      type: object
      description: >
        les intervenant dans la disccussion
      required:
        - room
        - hote
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant unique
        room:
          type: string
          format: ObjectId
          description: identifiant de la disccussion
        hote:
          type: string
          format: ObjectId
          description: identifiant du hote
        role:
          type: string
          description: role du hote dans la disccussion
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur

    Room:
      type: object
      description: >
        disccussion
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant unique
        name:
          type: string
          description: nom de la room
        status:
          type: string
          enum:
            - private
            - public
          description: status de la room
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur

    Attach:
      type: object
      description: >
        fichier associer au message envoyer
      required:
        - message
        - type
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant unique
        message:
          type: string
          format: ObjectId
          description: identifiant du message
        path:
          type: string
          format: url
          description: lien vers le fichier uploader
        type:
          type: string
          enum:
            - image
            - video
            - audio
            - file
          description: type de fichier

    Rating:
      type: object
      description: >
        note d'un lead
      required:
        - lead
        - product
      properties:
        lead:
          type: string
          format: ObjectId
          description: identifiant du lead
        product:
          type: string
          format: ObjectId
          description: identifiant du product
        rating:
          type: number
          maximum: 5
          minimum: 0
          description: note du lead
        avis:
          type: string
          description: avis du lead
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur

    Product:
      type: object
      description: >
        produit a vendre
      required:
        - org
      properties:
        assign:
          type: string
          format: ObjectId
          description: identifiant de l'agent ia
        org:
          type: string
          format: ObjectId
          description: identifiant de l'organisation proprietaire
        name:
          type: string
          description: nom du produit
        description:
          type: string
          description: description du produit
        price:
          type: number
          description: prix de vente du produit
        online:
          type: boolean
          description: permet d'identifier le produit mis en vente
        stock:
          type: number
          description: stock du produit
        category:
          type: string
          description: categorie du produit
        media:
          type: array
          items:
            type: string
            format: url
          description: images/videos du produit
        brand:
          type: string
          description: marque du produit
        features:
          type: array
          items:
            type: string
          description: caracteristiques du produit
        address:
          type: string
          description: lieu de vente du produit
        sizes:
          type: array
          items:
            type: string
          description: taille du produit
        colors:
          type: array
          items:
            type: string
          description: couleur du produit
        delivery:
          type: object
          properties:
            in:
              type: number
              description: prix de livraison dans la zone de vente
            out: 
              type: number
              description: prix de livraison en dehors de la zone de vente
        ondemand:
          type: string
          description: definis le type de service livraison/...
        warranty:
          type: string
          description: definis la garantie du produit
        bonus:
          type: array
          items:
            type: object
            format: Product
    
    Order:
      type: object
      description: >
        commande de vente de produit
      required:
        - lead
        - assign
        - items
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant unique
        lead:
          type: string
          format: ObjectId
          description: identifiant du lead
        assign:
          type: string
          format: ObjectId
          description: identifiant de l'agent ia 
        total:
          type: number
          description: montant total de la commande
        fee:
          type: number
          description: impots
        items:
          type: array
          items:
            type: object
            required:
              - product
              - quantity
              - price
            properties:
              product:
                type: string
                format: ObjectId
              quantity:
                type: number
              price:
                type: number
        shipment:
          type: object
          properties:
            when:
              type: string
              format: date-time
            where:
              type: string
            fee:
              type: number
        status:
          type: string
          enum:
            - init
            - doing
            - done
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur

    Invoice:
      type: object
      description: >
        facture de vente de produit
      required:
        - type
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant unique
        type:
          type: string
          description: type de facture
        amount:
          type: number
          description: montant de la facture
        currency:
          type: string
          description: devise de la facture
        exchangeRate:
          type: number
          description: taux de conversion
        status:
          type: string
          enum:
            - pending
            - completed
            - failed
            - cancelled
          description: statut de la facture
        description:
          type: string
          description: description de la facture
        from:
          type: string
          format: ObjectId
          description: expediteur de la facture
        to:
          type: string
          format: ObjectId
          description: destinataire de la facture
        processedAt:
          type: string
          format: date-time
          description: date de traitement de la facture
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur

    Xaccount:
      type: object
      description: >
        compte des admins
      required:
        - name
        - balance
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant unique
        name:
          type: string
          description: nom du compte
        balance:
          type: number
          description: solde de l'utilisateur

    Account:
      type: object
      description: >
        compte du manager
      required:
        - owner
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant unique
        owner:
          type: string
          format: ObjectId
          description: identifiant de l'utilisateur proprietaire
        currency:
          type: string
          description: devise de l'application
        balance:
          type: number
          description: solde de l'utilisateur
        assign:
          type: array
          items:
            type: object
            properties:
              org:
                type: string
                format: ObjectId
              balance:
                type: number
          description: assigner des fonds au organisation du manager
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur

    Relance:
      type: object
      description: >
        rendez-vous de relancement du lead
      required:
        - assign
        - lead
        - relance
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant unique
        assign:
          type: string
          format: ObjectId
          description: identifiant de l'agent ia a la charge du relancement
        lead:
          type: string
          format: ObjectId
          description: identifiant du lead
        relance:
          type: string
          format: date-time
          description: date de relancement du lead
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur

    Rate:
      type: object
      description: >
        taux de conversion
      properties:
        base:
          type: number
          description: monnaie de base
        target:
          type: number
          description: monnaie de conversion
        rate:
          type: number
          description: taux de conversion
        provider:
          type: string
          description: fournisseur de conversion
        fetchedAt:
          type: string
          format: date-time
          description: date de recuperation des donnees
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur
    
    Status:
      type: object
      description: >
        status d'une organisation
      required:
        - org
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant unique
        org:
          type: string
          format: ObjectId
          description: identifiant de l'organisation proprietaire
        media:
          type: string
          format: url
          description: lien vers le fichier uploader
        text:
          type: string
          description: message associer au status
        link: 
          type: string
          format: url
          description: lien associer au status
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur

    View:
      type: object
      description: >
        vue d'un status
      required:
        - status
        - viewer
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant unique
        status:
          type: string
          format: ObjectId
          description: identifiant du status
        viewer:
          type: string
          format: ObjectId
          description: identifiant du viewer
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur

    Settings:
      type: object
      description: >
        settings d'un organisation
      required:
        - org
      properties:
        _id:
          type: string
          format: ObjectId
          description: identifiant unique
        org:
          type: string
          format: ObjectId
          description: identifiant de l'organisation proprietaire
        relance:
          type: boolean
          description: definis si les relance sont automatique ou non
        status:
          type: boolean
          description: publiction en status ou non
        lang:
          type: string
          description: langue de l'application
        currency:
          type: string
          description: devise de l'application
        country:
          type: string
          description: pays de l'application
        createdAt:
          type: string
          format: date-time
          description: date de creation de l'utilisateur
        updatedAt:
          type: string
          format: date-time
          description: derniere mis a jour de l'utilisateur

    Org:
      type: object
      description: >
        organisation ayant des produit a vendre et gerer par un manager
        elle possede:
        - un settings pour la gestion de ces parametre personnel
      required:
        - reason
        - manager
        - social
        - country
        - state
        - address
        - location
        - phone
        - email
        - sector
      properties:
        reason:
          type: string
          description: nom de l'organisation
        manager:
          type: string
          format: ObjectId
          description: identifiant du manager de l'organisation
        referer:
          type: string
          format: ObjectId
          description: identifiant du referant
        social:
          type: string
          description: type de societe
          enum:
            - SNC
            - SCS
            - SA
            - SAS
            - SASU
            - SARL
            - EURL
            - SCOP
            - SCIC
            - EI
            - EIRL
            - Micro-entreprise
            - SEP
            - GIE
            - SCI/SCP/...
        country:
          type: string
          description: pays
        state:
          type: string
          description: ville/coummune
        address:
          type: string
          description: location verbale
        location:
          type: object
          properties:
            type:
              type: string
            coordinates:
              type: array
              items:
                type: number
        phone:
          type: string
          description: numero professionnel de l'organisation
        email:
          type: string
          description: email professionnel de l'organisation
        sector:
          type: string
          description: identifiant du sector principal de l'organisation
        service:
          type: string
          description: service fournis
        employees:
          type: string
          description: interval du nombre d'employes
        area:
          type: string
          description: zone d'action
        picture:
          type: string
          format: url
          description: photo de profil de l'organisation
        client:
          type: string
          description: type de client
        access:
          type: boolean
          description: definis si l'organisation est operationnel ou non

    Credentials:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
        password:
          type: string


paths:
  /org:
    post:
      summary: creation d'une organisation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
                manager:
                  type: string
                  format: ObjectId
                social:
                  type: string
                country:
                  type: string
                state:
                  type: string
                address:
                  type: string
                location:
                  type: object
                  properties:
                    type:
                      type: string
                      example: Point
                      description: toujours mettre Point
                    coordinates:
                      type: array
                      items:
                        type: number
                        description: longitude, latitude
                phone:
                  type: string
                email:
                  type: string
                sector:
                  type: string
                service:
                  type: string
      responses:
        '201':
          description: created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Org'
    get:
      summary: lister toute les organisation
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_limit'
        - $ref: '#/components/parameters/_page'
        - $ref: '#/components/parameters/_name'
        - $ref: '#/components/parameters/_manager'
        - $ref: '#/components/parameters/_referer'
        - $ref: '#/components/parameters/_lat'
        - $ref: '#/components/parameters/_lon'
        - $ref: '#/components/parameters/_radius'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Org'
  
  /org/{id}:
    get:
      summary: lire une organisation
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_id'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Org'
    put:
      summary: mis a jour d'une organisation
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_id'
      requestBody:
        required: false
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Org'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Org'
    delete:
      summary: suppression d'une organisation
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_id'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
                
  /org/stats/count:
    get:
      summary: nombre total organisation
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_name'
        - $ref: '#/components/parameters/_manager'
        - $ref: '#/components/parameters/_referer'
        - $ref: '#/components/parameters/_lat'
        - $ref: '#/components/parameters/_lon'
        - $ref: '#/components/parameters/_radius'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: number
      
  /settings/{id}:
    get:
      summary: lire le settings
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_id'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Settings'
    put:
      summary: mis a jour du settings
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_id'
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Settings'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Settings'
    delete:
      summary: suppressiondu settings
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_id'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: number
  
  /settings:
    get:
      summary: lister toute les settings
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_id'
        - $ref: '#/components/parameters/_name'
        - $ref: '#/components/parameters/_currency'
        - $ref: '#/components/parameters/_lang'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Settings'

  /status/{id}:
    post:
      summary: creation de status
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_id'
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                media:
                  type: string
                  format: binary
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Status'
  
  /account/me:
    get:
      summary: voir mon compte
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Account'
  
  /account:
    get:
      summary: tout voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_min'
        - $ref: '#/components/parameters/_max'
        - $ref: '#/components/parameters/_after'
        - $ref: '#/components/parameters/_before'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Account'
  /account/{id}:
    put:
      summary: assigner des fonds a une organisation
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_id'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                balance:
                  type: number
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Account'
  
  # /account/actes:
  #   post:
  #     summary: action sur les fonds
  #     security:
  #       - bearerAuth: []

  /invoice:
    get:
      summary: tout voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_name'
        - $ref: '#/components/parameters/_min'
        - $ref: '#/components/parameters/_max'
        - $ref: '#/components/parameters/_me'
        - $ref: '#/components/parameters/_after'
        - $ref: '#/components/parameters/_before'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Invoice'

  /invoice/{id}:
    get:
      summary: voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_id'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Invoice'

  /order:
    post:
      summary: commander
      parameters:
        - $ref: "#/components/parameters/_id"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - items
              properties:
                items:
                  type: array
                  items:
                    type: object
                    properties:
                      product:
                        type: string
                        format: ObjectId
                      quantity:
                        type: number
                      price:
                        type: number
                shipment:
                  type: object
                  properties:
                    when:
                      type: string
                      format: date-time
                    where:
                      type: string
                    fee:
                      type: number
                status:
                  type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Order"
    get:
      summary: tout voir
      parameters:
        - $ref: "#/components/parameters/_me"
        - $ref: "#/components/parameters/_name"
        - $ref: "#/components/parameters/_after"
        - $ref: "#/components/parameters/_before"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Order"

  /order/{id}:
    get:
      summary: voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Order"
    put:
      summary: mis a jour
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Order"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Order"
    delete:
      summary: suppression
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Order"

  /order/stats/count:
    get:
      summary: nombre de order
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_me"
        - $ref: "#/components/parameters/_name"
        - $ref: "#/components/parameters/_after"
        - $ref: "#/components/parameters/_before"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: number

  /product:
    get:
      summary: tout voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_me"
        - $ref: "#/components/parameters/_name"
        - $ref: "#/components/parameters/_after"
        - $ref: "#/components/parameters/_before"
        - $ref: "#/components/parameters/_online"
      responses:
        '200':
          description: OK
          content:
            multipart/form-data:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Product"
  
  /product/{id}:
    post:
      summary: creation de produit
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - org
                - name
                - description
                - price
                - stock
                - category
                - media
                - brand
                - features
                - address
                - sizes
                - colors
                - delivery
                - ondemand
                - warranty
              properties:
                assign:
                  type: string
                  format: ObjectId
                org:
                  type: string
                  format: ObjectId
                name:
                  type: string
                description:
                  type: string
                price:
                  type: number
                stock:
                  type: number
                category:
                  type: string
                media:
                  type: array
                  items:
                    type: string
                    format: url
                brand:
                  type: string
                features:
                  type: string
                address:
                  type: string
                sizes:
                  type: array
                  items:
                    type: string
                colors:
                  type: array
                  items:
                    type: string
                delivery:
                  type: object
                  properties:
                    in:
                      type: number
                    out:
                      type: number
                ondemand:
                  type: string
                warranty:
                  type: number
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Product"
    get:
      summary: voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Product"
    put:
      summary: mis a jour
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      requestBody:
        required: false
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Product"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Product"
    delete:
      summary: suppression
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
  
  /product/stats/count:
    get:
      summary: nombre de produit
      security:
        - bearerAuth: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: number

  /rating:
    post:
      summary: notation produit
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                rating:
                  type: number
                  minimum: 0
                  maximum: 5
                avis:
                  type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Rating"
    get:
      summary: tout voir
      parameters:
        - $ref: "#/components/parameters/_me"
        - $ref: "#/components/parameters/_after"
        - $ref: "#/components/parameters/_before"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Rating"
  
  /rating/{id}:
    get:
      summary: voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Rating"

  /rating/product/{id}:
    get:
      summary: voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: number

  /rating/stats/count:
    get:
      summary: nombre de rating
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_me"
        - $ref: "#/components/parameters/_after"
        - $ref: "#/components/parameters/_before"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: number
  
  /xaccount/{name}:
    get:
      summary: voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_cname"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Xaccount"
    put:
      summary: mis a jour
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_cname"
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Xaccount"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Xaccount"
  
  /rooms/{id}:
    post:
      summary: ajout d'attachment
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                attachs:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Room"
    get:
      summary: voir
      parameters:
        - $ref: "#/components/parameters/_id"
      security:
        - bearerAuth: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Room"
    delete:
      summary: suppression
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'

  /health:
    get:
      summary: voir
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          code:
                            type: string
                          username:
                            type: string
  
  /health/admin/remove:
    delete:
      summary: suppression manuel de code
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                code:
                  type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          username:
                            type: string

  /health/admin/info/{code}:
    get:
      summary: voir
      security:
        - bearerAuth: []
      parameters:
        - name: code
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          username:
                            type: string
                          createdAt:
                            type: string
                            format: date-time
                          expiredAt:
                            type: string
                            format: date-time
                          attempts:
                            type: number
                          maxAttempts:
                            type: number

  /health/admin/stats:
    get:
      summary: voir
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          totalGenerated:
                            type: number
                          totalExpired:
                            type: number
                          totalUsed:
                            type: number
                          totalInvalidAttempts:
                            type: number
                          currentActive:
                            type: number
                          uptine:
                            type: number
  
  /health/admin/active:
    get:
      summary: voir
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          code:
                            type: string
                          username:
                            type: string
                          expiredAt:
                            type: string
                            format: date-time
                          attempts:
                            type: string
                            format: date-time

  /health/admin/cleanup:
    post:
      summary: nettoyage forcer
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: number
  
  /health/auto-cleanup/start:
    post:
      summary: cleanp
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'

  /health/auto-cleanup/stop:
    post:
      summary: stop clean
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'

  /admin:
    post:
      summary: load admin data
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - firstname
                - lastname
                - email
                - cni
                - position
              properties:
                firstname:
                  type: string
                lastname:
                  type: string
                email:
                  type: string
                cni:
                  type: string
                position:
                  type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Admin"
    get:
      summary: tout voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_name"
        - $ref: "#/components/parameters/_online"
        - $ref: "#/components/parameters/_auth"
        - $ref: "#/components/parameters/_after"
        - $ref: "#/components/parameters/_before"
        - $ref: "#/components/parameters/_limit"
        - $ref: "#/components/parameters/_page"
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Admin"

  /admin/sign:
    post:
      summary:  login par email
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
                  
  /admin/verify:
    post:
      summary: login verify
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                otp:
                  type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        allOf:
                          - $ref: "#/components/schemas/Admin"
                          - type: object
                            properties:
                              accessToken:
                                type: string
                              refreshToken:
                                type: string
  
  /admin/{id}:
    get:
      summary: voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Admin"
    put:
      summary: mis a jour
      security:
        - bearerAuth: []
      requestBody:
        required: false
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Employee"
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Admin"
    delete:
      summary: suppression
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'

  /admin/stats/count:
    get:
      summary: nombre de admin
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_name"
        - $ref: "#/components/parameters/_online"
        - $ref: "#/components/parameters/_auth"
        - $ref: "#/components/parameters/_after"
        - $ref: "#/components/parameters/_before"
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: number

  /employee:
    post:
      summary: creation des employees
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - org
                - fullname
                - email
                - password
                - phone
              properties:
                org:
                  type: string
                  format: ObjectId
                fullname:
                  type: string
                email:
                  type: string
                password:
                  type: string
                phone:
                  type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Employee"
    get:
      summary: tout voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_name"
        - $ref: "#/components/parameters/_online"
        - $ref: "#/components/parameters/_auth"
        - $ref: "#/components/parameters/_before"
        - $ref: "#/components/parameters/_after"
        - $ref: "#/components/parameters/_page"
        - $ref: "#/components/parameters/_limit"
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Employee"
  
  /position/{id}:
    get:
      summary: voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Employee"
    put:
      summary: mis a jour
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      requestBody:
        required: false
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Employee"
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Employee"
    delete:
      summary: suppression
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
  
  /position/stats/count:
    get:
      summary: nombre d'employes
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_name"
        - $ref: "#/components/parameters/_online"
        - $ref: "#/components/parameters/_auth"
        - $ref: "#/components/parameters/_before"
        - $ref: "#/components/parameters/_after"
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: number
  
  /lead:
    post:
      summary: creation de lead
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Lead"
    get:
      summary: tout voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_name"
        - $ref: "#/components/parameters/_online"
        - $ref: "#/components/parameters/_auth"
        - $ref: "#/components/parameters/_before"
        - $ref: "#/components/parameters/_after"
        - $ref: "#/components/parameters/_page"
        - $ref: "#/components/parameters/_limit"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Lead"
    
  /lead/{id}:
    get:
      summary: voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Lead"
    put:
      summary: mis a jour
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      requestBody:
        required: false
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Lead"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Lead"

  /lead/stats/count:
    get:
      summary: nombre de lead
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_name"
        - $ref: "#/components/parameters/_online"
        - $ref: "#/components/parameters/_auth"
        - $ref: "#/components/parameters/_before"
        - $ref: "#/components/parameters/_after"
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: number

  /manager:
    post:
      summary: load data manager
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - firstname
                - lastname
                - email
                - phone
                - position
              properties:
                firstname:
                  type: string
                lastname:
                  type: string
                email:
                  type: string
                phone:
                  type: string
                position:
                  type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
  
  /manager/register:
    post:
      summary: creation du manager
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - otp
              properties:
                otp:
                  type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Manager"
    get:
      summary: tout voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_name"
        - $ref: "#/components/parameters/_online"
        - $ref: "#/components/parameters/_auth"
        - $ref: "#/components/parameters/_before"
        - $ref: "#/components/parameters/_after"
        - $ref: "#/components/parameters/_page"
        - $ref: "#/components/parameters/_limit"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Manager"
  
  /manager/password/{id}:
    post:
      summary: ajout/ modification de password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - password
              properties:
                password:
                  type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
  
  /manager/{id}:
    get:
      summary: voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Manager"
    put:
      summary: mis a jour
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      requestBody:
        required: false
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Manager"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Manager"
    delete:
      summary: suppression
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
  
  /manager/stats/count:
    get:
      summary: nombre de manager
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_name"
        - $ref: "#/components/parameters/_online"
        - $ref: "#/components/parameters/_auth"
        - $ref: "#/components/parameters/_before"
        - $ref: "#/components/parameters/_after"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: number

  /neo:
    post:
      summary: creation de agent neo
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Neo'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Neo'
    get:
      summary: tout voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_name"
        - $ref: "#/components/parameters/_sex"
        - $ref: "#/components/parameters/_version"
        - $ref: "#/components/parameters/_org"
        - $ref: "#/components/parameters/_before"
        - $ref: "#/components/parameters/_after"
        - $ref: "#/components/parameters/_page"
        - $ref: "#/components/parameters/_limit"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Neo'
  
  /neo/{id}:
    get:
      summary: voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Neo'
    put:
      summary: mis a jour
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      requestBody:
        required: false
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Neo'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Neo'
    delete:
      summary: suppression
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
  
  /neo/stats/count:
    get:
      summary: nombre d'agent
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_name"
        - $ref: "#/components/parameters/_sex"
        - $ref: "#/components/parameters/_version"
        - $ref: "#/components/parameters/_org"
        - $ref: "#/components/parameters/_before"
        - $ref: "#/components/parameters/_after"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: number

  /referer:
    post:
      summary: load data
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - fullname
                - email
                - position
                - country
                - city
                - phone
              properties:
                fullname:
                  type: string
                email:
                  type: string
                position:
                  type: string
                country:
                  type: string
                city:
                  type: string
                phone:
                  type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
  
  /referer/register:
    post:
      summary: creation referer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - otp
              properties:
                otp:
                  type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Referer"
    
    get:
      summary: tout voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_name'
        - $ref: '#/components/parameters/_online'
        - $ref: '#/components/parameters/_auth'
        - $ref: '#/components/parameters/_before'
        - $ref: '#/components/parameters/_after'
        - $ref: '#/components/parameters/_page'
        - $ref: '#/components/parameters/_limit'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Referer"
  
  /referer/password/{id}:
    post:
      summary: create/update password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - password
              properties:
                password:
                  type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
  
  /referer/{id}:
    get:
      summary: voir
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Referer"
    put:
      summary: mis a jour
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      requestBody:
        required: false
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Referer"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Referer"
    delete:
      summary: suppression
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/_id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
  
  /referer/stats/count:
    get:
      summary: nombre de referant
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_name'
        - $ref: '#/components/parameters/_online'
        - $ref: '#/components/parameters/_auth'
        - $ref: '#/components/parameters/_before'
        - $ref: '#/components/parameters/_after'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: number

  /auth/login/{name}:
    post:
      summary: login by model (employee, manager, referer)
      parameters:
        - $ref: "#/components/parameters/_name"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Credentials"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          accessToken:
                            type: string
                          refreshToken:
                            type: string
                          user:
                            type: object
                            enum:
                              - $ref: "#/components/schemas/Employee"
                              - $ref: "#/components/schemas/Manager"
                              - $ref: "#/components/schemas/Referer"

  /auth/logout/{name}/{id}:
    post:
      summary: logout by model (employee, manager, referer, admin, lead)
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_name'
        - $ref: '#/components/parameters/_id'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'

  /auth/forgot/{name}:
    post:
      summary: forgot pasword
      parameters:
        - $ref: '#/components/parameters/_name'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'

  /auth/verify/{name}:
    post:
      summary: verification
      parameters:
        - $ref: '#/components/parameters/_name'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                otp:
                  type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: string

  /auth/reset/{name}/{id}:
    post:
      summary: reset password
      parameters:
        - $ref: '#/components/parameters/_name'
        - $ref: '#/components/parameters/_id'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                password:
                  type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'

  /auth/authorization/{name}/{id}:
    post:
      summary: authorization
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/_name'
        - $ref: '#/components/parameters/_id'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                permissions:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'

  /automate/{id}:
    post:
      summary: creation de relance
      parameters:
        - $ref: '#/components/parameters/_id'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Relance'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Relance'
    get:
      summary: voir
      parameters:
        - $ref: '#/components/parameters/_id'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Relance'
    delete:
      summary: suppression
      parameters:
        - $ref: '#/components/parameters/_id'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'
    put:
      summary: mis a jour
      parameters:
        - $ref: '#/components/parameters/_id'
      responses:
        '200':
          description: Ok

  /automate:
    get:
      summary: tout voir
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Relance'

  /automate/stats/count:
    get:
      summary: nombre de relance
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/JsonResponse'
                  - type: object
                    properties:
                      data:
                        type: number

  /automate/stop:
    post:
      summary: stop relance
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonResponse'

